(this["webpackJsonpspinning-wheel"]=this["webpackJsonpspinning-wheel"]||[]).push([[0],{144:function(e,t){},274:function(e,t,n){},275:function(e,t,n){},320:function(e,t){},322:function(e,t){},332:function(e,t){},334:function(e,t){},360:function(e,t){},362:function(e,t){},363:function(e,t){},368:function(e,t){},370:function(e,t){},389:function(e,t){},401:function(e,t){},404:function(e,t){},452:function(e,t,n){},455:function(e,t,n){},459:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),o=n(47),i=n.n(o),a=(n(274),n(275),n(11)),c=n.n(a),u=n(68),l=n(98),d=n(99),h=n(108),f=n(107),p=n(28),v=n(29),g=n(151),m=n(100),j=n(254),b=n(268),w=(n(452),n(3)),x=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).onTouchStart=function(e){r.dragRef&&r.setState({tempSpeed:1},(function(){r.dragRef.current={data:{isDragging:!0}}})),e.stopPropagation()},r.onTouchMove=function(e){r.dragRef&&r.dragRef.current&&r.dragRef.current.data&&r.dragRef.current.data.isDragging&&r.state.tempSpeed<100&&r.setState({tempSpeed:r.state.tempSpeed+.4,dragDegree:r.state.dragDegree+1}),r.dragRef&&r.dragRef.current&&r.dragRef.current.data&&r.dragRef.current.data.isDragging&&(r.state.tempSpeed+.4>=100||r.state.tempSpeed>=100)&&r.onEnd(e),e.stopPropagation()},r.onEnd=function(e){r.dragRef&&r.dragRef.current&&r.dragRef.current.data&&r.dragRef.current.data.isDragging&&r.debouncedSelect(),r.dragRef&&r.dragRef.current&&r.dragRef.current.data&&(r.dragRef.current.data={isDragging:!1}),e.stopPropagation()},r.eventHandler=function(e){e.stopPropagation()},r.appendSpreadsheet=function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r.doc){e.next=3;break}return e.abrupt("return");case 3:return n=r.doc.sheetsById[0],e.next=6,n.addRow(t);case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),b.b.error("Something went wrong, Data was not saved in the database.");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),r._onMouseMove=function(e){r.setState({x:e.pageX,y:e.pageY})},r.onPowerClick=function(){var e=r.powerRef.current.getBoundingClientRect(),t=e.left+e.width,n=(r.state.x-e.left)/(t-e.left)*100;r.setState({speed:Math.floor(n),tempSpeed:Math.floor(n)},(function(){r.state.speed>20&&r.selectItem()}))},r.getColor=function(e){return(e+=1)%4===0?"#65203A":e%3===0?"#551b31":e%2===0?"#742543":"#832A4B"},r.doc=null,r.state={selectedItem:null,speed:15,tempSpeed:15,dragDegree:1,lastPosition:0},r.powerRef=s.a.createRef(),r.wheelRef=s.a.createRef(),r.dragRef=s.a.createRef(),r.selectItem=r.selectItem.bind(Object(m.a)(r)),r.debouncedSelect=function(e,t){var n;return function(){clearInterval(n),n=setTimeout((function(){e()}),t)}}(r.selectItem,300),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wheelRef.current.addEventListener("touchstart",this.onTouchStart,{passive:!0}),this.wheelRef.current.addEventListener("mousedown",this.onTouchStart),this.wheelRef.current.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.wheelRef.current.addEventListener("mousemove",this.onTouchMove),this.wheelRef.current.addEventListener("touchend",this.onEnd),this.wheelRef.current.addEventListener("mouseup",this.onEnd),document.body.addEventListener("mouseleave",this.onEnd),this.powerRef.current.addEventListener("touchstart",this.eventHandler,{passive:!0}),this.powerRef.current.addEventListener("touchmove",this.eventHandler,{passive:!1}),this.powerRef.current.addEventListener("touchend",this.eventHandler),e.prev=10,this.doc=new j.GoogleSpreadsheet("1BzxH-YuUAiGqKeJglHMyCWwXJR-L24aPDmepwYD7QBw"),e.next=14,this.doc.useServiceAccountAuth({client_email:"google-sheets@testing-lms-57b19.iam.gserviceaccount.com",private_key:"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC6iw3oz61SijFK\\nko6cSuES/tHhpg9bTrqP3ywXODZPQ0420H6TesutmbfX9OXZuxG+TNYHXmkrSXRB\\nAUKbF0fXlIvIDEZlcFBk/DscDYPncJCmGfZ+vm0Iy7o06XBkWWZDdCtPQFYDhzza\\nVc4P+caSjCd1tONjsPVimUT/ISPXQ8P+tWjAuHBvguXz1BUYuThT4JCBfEG6b10J\\n2apkmimlXrUN9SZ69oxkkniu8tCeF4u6eXNFtgOBitLUqgkAdLXHoELrfgSgJj9z\\nYISe+gLsT0mfZJx2fT9oB4ULlJPffx8l2B7NJ+l0+O1q4Tqp/juvuDxOAN7XVL2/\\npHMhd+rzAgMBAAECggEATOABW3A6fUl2BsVfAAnbt3hMBjHpIjfPqnrOMMN5njCe\\nivhhMWXpiiFPIjBKiPAO393KVj8SGEStJBzg1glCEhWlhUuJt0QR3YwUz/rB4R8C\\nfXE1pAXV6UoL8sJBDxnIiwPU1VQuHkYdTd0OjobgzoPzvw5Mp0jF11xSktGVc6BD\\nXk8xyfmjeZWFMiwb1WJZCGqJ5GYuZMJxnwoH3xc6nqhtC6ldHpB2sVhNNF6K62Uu\\nT0XGojehe/SMqhZ33nKLqFYsVoYvzWT3+AnZcHPVUXdupCIK38/PLIU2bn1C5J4i\\nNUowNGKcQWHfDemB65VsAN3RuMVXFFjdOHHoSvR0AQKBgQD/GpNlFo4K+uZZ7CMJ\\ntW6hv1WDFHZVQ5QQ9Q3BkNtZL0LVDM1eDv9Cp8VA83X0xWhsm1lHf495zyI65VTV\\nmynQEZEAHZtdaFQAq/DxkfanBfklLHvBTV+qoMVSuaxQfVP3lxXqs6MKdpUFdy6/\\nCzz3DNYSd1MuBswTU/8/XrjiVQKBgQC7MtHJMG1NT6xUwNrFAQihs3KdDon98/eY\\nznfTNIMe0CpSxX4lKWkiSgFm7gfI8lA+K18Nq3mcnsmSypoJCUnkPjtZbsV5iOna\\naMiViAjDlYh9+DYPUEs9dStrddC+NZI3wLBBdYyZfwPAEVdWalzzIspUFsNhGhbB\\nTv116eewJwKBgQCsSmCd91u7orSMquUHG5g6eaThQKKi9187DKZbwt/CHh8/EMRq\\n8CoJ9JFOSp+xztm18D2eAlL+a5ystlJTadYVhqetslFKBrolMfsqy/AP4gLgzmhO\\np1kjPi3Gr0vnmJ1rLIlK2EQXPvtqk5HoyUhFek/ibOCqx0BxFVvgirLHeQKBgECY\\n1cmeO2l9P9NzRUrMA4WBHeDSfo2ynVMOlEy+hyyf2qr7WX9LXesmLHuvUeJms4fw\\ngXl/HZUNOjO8VBEgMm5fhy1iSySYOVJT7DulWJjdRd9qQoVgSMZpY1VOr3yjkdRJ\\nWskL3jutl8a0dTXtuCtyau0/eaZNUWLddhs1XuzrAoGALNE7KdEKsiX6zfUOxohJ\\nmE7UhfuakM++k9nCAjmri7thYfbzGSk10bcTVJhIKMLGpUhcRZ8Na5RfjUwB2yKB\\n7YxadmU9VDp3VBINdECB+kyuTEN1B5Ur3UY3TLEEjP9V484rOEBpNMmtPNXV4XZ8\\nT8FK0/2dXblqv/k1wrwVZe4=\\n-----END PRIVATE KEY-----\\n".replace(/\\n/g,"\n")});case 14:return e.next=16,this.doc.loadInfo();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),b.b.error("Something went wrong");case 21:case"end":return e.stop()}}),e,this,[[10,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.wheelRef.current.removeEventListener("touchstart",this.onTouchStart),this.wheelRef.current.removeEventListener("mousedown",this.onTouchStart),this.wheelRef.current.removeEventListener("touchmove",this.onTouchMove),this.wheelRef.current.removeEventListener("mousemove",this.onTouchMove),this.wheelRef.current.removeEventListener("touchend",this.onEnd),this.wheelRef.current.removeEventListener("mouseup",this.onEnd),document.body.removeEventListener("mouseleave",this.onEnd),this.powerRef.current.removeEventListener("touchstart",this.eventHandler),this.powerRef.current.removeEventListener("touchmove",this.eventHandler),this.powerRef.current.removeEventListener("touchend",this.eventHandler)}},{key:"selectItem",value:function(){if(null===this.state.selectedItem){var e=Math.floor(Math.random()*this.props.items.length);this.props.onSelectItem&&this.props.onSelectItem(e);var t=Math.abs(360/this.props.items.length*e);console.log("lastPosition",t),this.setState({selectedItem:e,speed:this.state.tempSpeed,dragDegree:t}),e&&(console.log("selectedItem",this.props.items[e]),this.dragRef.current={data:{isDragging:!1}},this.appendSpreadsheet({web_client:"PWA",timestamp:new Date,spin_result_index:e}))}else this.setState({selectedItem:null}),setTimeout(this.debouncedSelect,500)}},{key:"componentDidUpdate",value:function(e){e.reset!==this.props.reset&&this.props.reset&&this.setState({selectedItem:null})}},{key:"render",value:function(){var e=this,t=this.state.selectedItem,n=this.props.items,r={"--nb-item":n.length,"--selected-item":t,"--spinning-duration":"".concat((150-Math.floor(this.state.speed))/10,"s"),"--nb-turn":"".concat(Math.floor((this.state.speed+50)/10))},s={"--drag-degree":this.state.dragDegree,"--last-position":this.state.lastPosition},o=null!==t?"spinning":"";return Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"wheel-container",children:[Object(w.jsx)("div",{className:"pointer-back"}),Object(w.jsx)("div",{className:"pointer"}),Object(w.jsx)("div",{ref:this.wheelRef,className:this.dragRef&&this.dragRef.current&&this.dragRef.current.data.isDragging?"wheel spinning-drag":"wheel ".concat(o),style:this.dragRef&&this.dragRef.current&&this.dragRef.current.data.isDragging?Object(g.a)(Object(g.a)({},r),s):r,children:n.map((function(t,n){return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"wheel-item",style:{"--item-nb":n,"--color":e.getColor(n)},children:[Object(w.jsx)("div",{className:"wheel-item-dot"}),t]},n)})}))}),Object(w.jsx)("div",{className:"spin-button",onClick:this.debouncedSelect,children:"Spin"})]}),Object(w.jsx)("div",{ref:this.powerRef,onClick:this.onPowerClick,onMouseMove:this._onMouseMove,style:{"--percentage":"".concat(this.state.tempSpeed,"%")},className:"speed-controller"})]})}}]),n}(s.a.Component);function O(e,t){if(!function(e){var t=getComputedStyle(e).overflowY;return e===document.scrollingElement&&"visible"===t||"scroll"===t||"auto"===t}(e))return!1;if(1===t)return e.scrollTop+e.clientHeight<e.scrollHeight;if(-1===t)return e.scrollTop>0;throw new Error("unsupported direction")}function E(e,t){return!!O(e,t)||null!=e.parentElement&&E(e.parentElement,t)}n(455);var S,R,y,L,k,B,M,T,A,D=function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),s=Object(r.useRef)(null),o=!1,i=!1,a=0,c=0;Object(r.useEffect)((function(){if(n&&n.current)return n.current.addEventListener("touchstart",l,{passive:!0}),n.current.addEventListener("mousedown",l),n.current.addEventListener("touchmove",d,{passive:!1}),n.current.addEventListener("mousemove",d),n.current.addEventListener("touchend",h),n.current.addEventListener("mouseup",h),document.body.addEventListener("mouseleave",h),function(){n&&n.current&&(n.current.removeEventListener("touchstart",l),n.current.removeEventListener("mousedown",l),n.current.removeEventListener("touchmove",d),n.current.removeEventListener("mousemove",d),n.current.removeEventListener("touchend",h),n.current.removeEventListener("mouseup",h),document.body.removeEventListener("mouseleave",h))}}),[]);var u=function(){requestAnimationFrame((function(){n&&n.current&&(n.current.style.overflowX="hidden",n.current.style.overflowY="auto",n.current.style.transform="translate(0px, 0px)"),s&&s.current&&(s.current.style.opacity="0"),t.current&&(t.current.classList.remove("ptr--pull-down-treshold-breached"),t.current.classList.remove("ptr--dragging"),t.current.classList.remove("ptr--fetch-more-treshold-breached")),o&&(o=!1)}))},l=function(e){i=!1,e instanceof MouseEvent&&(a=e.pageY),window.TouchEvent&&e instanceof TouchEvent&&(a=e.touches[0].pageY),c=a,"touchstart"===e.type&&E(e.target,-1)||n.current.getBoundingClientRect().top<0||(i=!0)},d=function(e){i&&(c=window.TouchEvent&&e instanceof TouchEvent?e.touches[0].pageY:e.pageY,t.current.classList.add("ptr--dragging"),c<a?i=!1:(c-a>=45&&(i=!0,o=!0,t.current.classList.remove("ptr--dragging"),t.current.classList.add("ptr--pull-down-treshold-breached")),c-a>95||(s.current.style.opacity=((c-a)/65).toString(),n.current.style.overflow="visible",n.current.style.transform="translate(0px, ".concat(c-a,"px)"),s.current.style.visibility="visible")))},h=function(){if(i=!1,a=0,c=0,!o)return s.current&&(s.current.style.visibility="hidden"),void u();n.current&&(n.current.style.overflow="visible",n.current.style.transform="translate(0px, ".concat(45,"px)")),e.onRefresh().then(u())};return Object(w.jsxs)("div",{ref:t,children:[Object(w.jsxs)("div",{className:"ptr__pull-down",ref:s,children:[Object(w.jsx)("div",{className:"ptr__loader ptr__pull-down--loading",children:"Release to refresh"}),Object(w.jsx)("div",{className:"ptr__pull-down--pull-more",children:"Pull Down To Refresh"})]}),Object(w.jsx)("div",{className:"ptr__children",ref:n,children:e.children})]})},C=n(461),N=v.a.div(S||(S=Object(p.a)(["\n    min-width: 358px;\n    max-width: 600px;\n    margin: 20px auto;\n"]))),P=function(){return Object(w.jsxs)(N,{children:[Object(w.jsx)(C.a,{active:!0}),Object(w.jsx)(C.a,{active:!0}),Object(w.jsx)(C.a,{active:!0}),Object(w.jsx)(C.a,{active:!0})]})},I=n(462),F=v.a.div(R||(R=Object(p.a)(["\n    display: flex;\n"]))),U=v.a.div(y||(y=Object(p.a)(["\n    flex: 1;\n"]))),V=function(e){var t=e.text;return Object(w.jsx)(F,{children:Object(w.jsxs)(U,{style:{fontSize:22,color:"#000000",margin:"20px 20px 50px 20px"},children:[Object(w.jsx)(I.a,{style:{color:"#1B1B1E"}})," ",t]})})},H=v.a.div(L||(L=Object(p.a)(["\n  background: #FFFFFF;\n  border-radius: 12px;\n  margin: 40px 20px 0 20px;\n  padding: 20px;\n"]))),X=v.a.div(k||(k=Object(p.a)(["\n  font-style: normal;\n  font-weight: 500;\n  font-size: 20px;\n  line-height: 24px;\n  text-align: center;\n\n  color: #000000;\n"]))),Y=v.a.div(B||(B=Object(p.a)(["\n  font-style: normal;\n  font-weight: normal;\n  font-size: 12px;\n  line-height: 18px;\n  margin-top: 6px;\n  text-align: center;\n  color: rgba(0, 0, 0, 0.58);\n"]))),J=function(e){var t=e.heading,n=e.subheading;return Object(w.jsxs)(H,{children:[Object(w.jsx)(X,{children:t}),Object(w.jsx)(Y,{children:n})]})},K=v.a.div(M||(M=Object(p.a)(["\n  margin: 20px 0;\n  min-width: 358px;\n"]))),W=function(e){var t=e.children;return Object(w.jsx)(K,{children:t})},z=v.a.div(T||(T=Object(p.a)(["\n  font-style: normal;\n  font-weight: 500;\n  font-size: 14px;\n  line-height: 14px;\n  color: #000000;\n  text-align: center;\n  margin-top: 15px;\n"]))),Z=v.a.div(A||(A=Object(p.a)(["\n    background-color: rgb(247, 246, 243);\n    max-width: 410px;\n    margin: 0 auto;\n"]))),Q=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e,r){var s;return Object(l.a)(this,n),(s=t.call(this,e,r)).fetchData=Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://60852621d14a87001757772d.mockapi.io/api/v1/get-spinner-data");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,s.setState({items:n,loading:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),b.b.error("Something went wrong"),s.setState({loading:!1});case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),s.onRefresh=function(){return console.log("On Refresh"),new Promise((function(e,t){s.setState({reset:!0,loading:!0},e),setTimeout((function(){s.setState({reset:!1,loading:!1})}),1e3)}))},s.state={reset:!1,loading:!0,items:[]},s}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(w.jsx)(Z,{children:Object(w.jsx)(D,{onRefresh:this.onRefresh,children:this.state.loading?Object(w.jsx)(P,{}):Object(w.jsxs)(W,{children:[Object(w.jsx)(V,{text:"Your rewards"}),this.state.items&&this.state.items.length?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(x,{reset:this.state.reset,items:this.state.items}),Object(w.jsx)(J,{heading:"Spin the wheel now to get rewarded",subheading:"Tap on Spin or rotate the wheel anti-clockwise and release to start spinning "})]}):Object(w.jsx)(z,{children:"Spinner wheel was not loaded, please try refreshing the page"}),Object(w.jsxs)(z,{children:["Have a question? ",Object(w.jsx)("font",{style:{color:"#F6C95D"},children:"Get help"})]})]})})})}}]),n}(r.Component),q=n(266),G=n(18);var _=function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(q.a,{basename:"/spinning-wheel",children:Object(w.jsx)("div",{children:Object(w.jsxs)(G.c,{children:[Object(w.jsx)(G.a,{exact:!0,path:"/",component:Q}),"="]})})})})},$=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ee(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,463)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),s(e),o(e),i(e)}))};i.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(_,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/spinning-wheel",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/spinning-wheel","/service-worker.js");$?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ee(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ee(t,e)}))}}(),te()}},[[459,1,2]]]);
//# sourceMappingURL=main.c2d337b2.chunk.js.map